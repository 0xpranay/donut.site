(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{113:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),r=n(3),i=n.n(r),s=n(32),u=n.n(s),o=n(21),p=n.n(o),l=n(43),d=n(109),f=n.n(d),m=n(62),b=n(93),h=n(218),v=n(0),w=n(33);function x(e){var t=Object(w.c)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Object(v.h)(Object(v.b)([t,h.a]).slice(0,32))}var E=n(58),y=n(55),O=n(89),j=n(45),k=(n(214),function(e){var t=Object(l.b)(),n=t.account,r=t.active,s=t.chainId,o=t.library,d=Object(y.b)(),m=d.signer,h=(d.feeBalance,d.donutBalance,d.token),v=(d.tipping,Object(a.useState)(!1)),w=p()(v,2),x=w[0],E=w[1],k=Object(a.useState)(e.contentId),C=p()(k,2),D=C[0],T=(C[1],Object(a.useState)(e.recipient)),U=p()(T,2),I=U[0],F=(U[1],Object(a.useState)(e.address)),B=p()(F,2),J=B[0],R=(B[1],Object(a.useState)(1e3)),q=p()(R,2),A=q[0],L=q[1],P=Object(a.useState)(!1),W=p()(P,2),_=W[0],z=W[1],G=Object(a.useState)(""),H=p()(G,2),K=H[0],M=H[1];function Q(){return V.apply(this,arguments)}function V(){return(V=u()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.allowance(n,j.b[s].tipping);case 2:t=e.sent,z(t.gte(Object(b.b)(A.toString())));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=u()(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("https://www.reddit.com/api/info.json?id=".concat(D));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,"t3"===a?M(c.title):"t1"===a&&M(c.body);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D?function(){e.apply(this,arguments)}():M("")}),[D]),Object(a.useEffect)((function(){h?Q():z(!1)}),[h,A]);var X,Y=x||!A,Z=f()("complete cute-pink-btn",{disabled:Y});return X=r?100===s?_?c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n,a,c,r,i){return N.apply(this,arguments)}(m,s,"DONUT",J,A,D,E)}},"Send Tip"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n){return g.apply(this,arguments)}(h.connect(m),j.b[s].tipping).then(Q)}},"Approve"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t){return S.apply(this,arguments)}(o)}},"Use xDai"):c.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),c.a.createElement("div",{className:"tipping-interface box"},c.a.createElement("div",{className:"tip-token"},"üç©"),c.a.createElement("div",{className:"cute-header tip-info"},"Tipping /u/",I),c.a.createElement("div",{className:"tip-token-info"},"EthTrader DONUTs"),c.a.createElement("div",{className:"reddit-preview"},c.a.createElement("h3",{className:"author"},I),c.a.createElement("p",{className:"body"},K)),c.a.createElement("div",{className:"cute-input quantity-container"},c.a.createElement("input",{value:A,type:"number",onChange:function(e){return L(e.target.value)}}),c.a.createElement("div",{className:"token"},"DONUT")),X)});function g(){return(g=u()(i.a.mark((function e(t,n,a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,t.approve(n,E.a);case 3:return c=e.sent,e.next=6,c.wait();case 6:a(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=u()(i.a.mark((function e(t,n,a,c,r,s,u){var o,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),o=j.b[n][a],p=new m.a(j.b[n].tipping,j.a.Tipping,t),e.next=5,p.tip(c,Object(b.b)(r.toString()),o,x(s));case 5:return l=e.sent,e.next=8,l.wait();case 8:u(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=u()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,t.jsonRpcFetchFunc("wallet_addEthereumChain",[{chainId:"0x64",chainName:"xDai",nativeCurrency:{name:"xDai",symbol:"xDai",decimals:18},rpcUrls:["https://rpc.xdaichain.com/"],blockExplorerUrls:["https://blockscout.com/xdai/mainnet"]}]);case 3:e.sent,n(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(){var e,t=(e="","undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e));return c.a.createElement(k,{recipient:t.get("recipient"),address:t.get("address"),contentId:t.get("contentId")})}}}]);