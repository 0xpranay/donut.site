(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{113:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),r=n(3),i=n.n(r),s=n(32),u=n.n(s),o=n(21),p=n.n(o),l=n(43),d=n(109),f=n.n(d),b=n(62),m=n(93),h=n(218),v=n(0),w=n(33);function x(e){var t=Object(w.c)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Object(v.h)(Object(v.b)([t,h.a]).slice(0,32))}var k=n(58),E=n(55),O=n(89),j=n(45),g=(n(214),function(e){var t=Object(l.b)(),n=t.account,r=t.active,s=t.chainId,o=t.library,d=Object(E.b)(),b=d.signer,h=(d.feeBalance,d.donutBalance,d.token),v=(d.tipping,Object(a.useState)(!1)),w=p()(v,2),x=w[0],k=w[1],g=Object(a.useState)(e.contentId),C=p()(g,2),D=C[0],T=(C[1],Object(a.useState)(e.recipient)),U=p()(T,2),I=U[0],F=(U[1],Object(a.useState)(e.address)),B=p()(F,2),J=B[0],R=(B[1],Object(a.useState)("1,000")),q=p()(R,2),A=q[0],L=q[1],P=Object(a.useState)(!1),W=p()(P,2),_=W[0],z=W[1],G=Object(a.useState)(""),H=p()(G,2),K=H[0],M=H[1];function Q(){return V.apply(this,arguments)}function V(){return(V=u()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.allowance(n,j.b[s].tipping);case 2:t=e.sent,z(t.gte(Object(m.b)(A.toString())));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=u()(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.b)("https://www.reddit.com/api/info.json?id=".concat(D));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,"t3"===a?M(c.title):"t1"===a&&M(c.body);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D?function(){e.apply(this,arguments)}():M("")}),[D]),Object(a.useEffect)((function(){h?Q():z(!1)}),[h,A]);var X,Y=x||!A,Z=f()("complete cute-pink-btn",{disabled:Y});return X=r?100===s?_?c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n,a,c,r,i){return N.apply(this,arguments)}(b,s,"DONUT",J,A,D,k)}},"Send Tip"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n){return y.apply(this,arguments)}(h.connect(b),j.b[s].tipping,k).then(Q)}},"Approve"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t){return S.apply(this,arguments)}(o,k)}},"Use xDai"):c.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),c.a.createElement("div",{className:"tipping-interface box"},c.a.createElement("div",{className:"tip-token"},"üç©"),c.a.createElement("div",{className:"cute-header tip-info"},"Tipping /u/",I),c.a.createElement("div",{className:"tip-token-info"},"EthTrader DONUTs"),c.a.createElement("div",{className:"reddit-preview"},c.a.createElement("h3",{className:"author"},I),c.a.createElement("p",{className:"body"},K)),c.a.createElement("div",{className:"cute-input quantity-container"},c.a.createElement("input",{value:A,onChange:function(e){return function(e){L(Object(O.a)(e.replace(/,/g,"")))}(e.target.value)}}),c.a.createElement("div",{className:"token"},"DONUT")),X)});function y(){return(y=u()(i.a.mark((function e(t,n,a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,t.approve(n,k.a);case 4:return c=e.sent,e.next=7,c.wait();case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:a(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(){return(N=u()(i.a.mark((function e(t,n,a,c,r,s,u){var o,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),o=j.b[n][a],p=new b.a(j.b[n].tipping,j.a.Tipping,t),e.prev=3,e.next=6,p.tip(c,Object(m.b)(r.toString()),o,x(s));case 6:return l=e.sent,e.next=9,l.wait();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:u(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function S(){return(S=u()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,t.jsonRpcFetchFunc("wallet_addEthereumChain",[{chainId:"0x64",chainName:"xDai",nativeCurrency:{name:"xDai",symbol:"xDai",decimals:18},rpcUrls:["https://rpc.xdaichain.com/"],blockExplorerUrls:["https://blockscout.com/xdai/mainnet"]}]);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:n(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}t.default=function(){var e,t=(e="","undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e));return c.a.createElement(g,{recipient:t.get("recipient"),address:t.get("address"),contentId:t.get("contentId")})}}}]);