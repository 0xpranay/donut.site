(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{125:function(e,t,n){"use strict";n.r(t);var a,c=n(225),r=n.n(c),i=n(4),s=n.n(i),o=(n(224),n(241)),u=n.n(o),l=n(226),p=n(242),d=n.n(p);u.a.extend(d.a);var f=l.a.div(a||(a=r()(["\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  font-size: 10vh;\n"])));t.default=function(){var e,t=(e="","undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e)).get("utc");return s.a.createElement(f,null,u()(t).format("h:ma"))}},224:function(e,t,n){"use strict";var a,c=n(2),r=n.n(c),i=n(29),s=n.n(i),o=n(23),u=n.n(o),l=n(4),p=n.n(l),d=n(68),f=n(69),m=n(43),b=n(117),h=n.n(b),v=n(59),g=n(70),w=n(244),E=n(58),O=n(50),j=n(67),k=n(44),x=n(227),N=n.n(x),y=(n(218),new N.a);function T(){return(T=s()(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,t.approve(n,E.a);case 4:return c=e.sent,e.next=7,c.wait();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function S(){return(S=s()(r.a.mark((function e(t,n,a,c,i,s,o){var u,l,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=i.replace(/,/g,""),console.log(a,c,i,s),o(!0),u=k.b[n][a.toLowerCase()],l=new v.a(k.b[n].tipping,k.a.Tipping,t),e.prev=5,e.next=8,l.tip(c,Object(g.b)(i),u,Object(w.a)(s));case 8:return p=e.sent,e.next=11,p.wait();case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),e.t0;case 16:o(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}t.a=function(e){var t=Object(m.b)(),n=t.account,c=t.active,i=t.chainId,o=t.library,b=Object(O.b)(),v=b.signer,w=(b.feeBalance,b.donutBalance,b.token),E=(b.tipping,Object(l.useState)(!1)),x=u()(E,2),N=x[0],C=x[1],U=Object(l.useState)(""),D=u()(U,2),L=D[0],P=D[1],R=Object(l.useState)(e.contentId),I=u()(R,2),A=I[0],B=I[1],F=Object(l.useState)(e.recipient||""),J=u()(F,2),_=J[0],q=J[1],z=Object(l.useState)(e.address),K=u()(z,2),W=K[0],G=K[1],H=Object(l.useState)(),M=u()(H,2),Q=M[0],V=M[1],X=Object(l.useState)("1,000"),Y=u()(X,2),Z=Y[0],$=Y[1],ee=Object(l.useState)(!1),te=u()(ee,2),ne=te[0],ae=te[1],ce=Object(l.useState)(""),re=u()(ce,2),ie=re[0],se=re[1],oe=Object(l.useRef)(null),ue=Object(l.useState)(!0),le=u()(ue,2),pe=le[0],de=le[1];function fe(){P(""),B(""),se(""),q(""),oe&&oe.current&&oe.current.focus()}Object(l.useEffect)((function(){_&&P(e.recipient)}),[]),Object(l.useEffect)((function(){if(L){var e="",t=0;try{var n=new URL(L).pathname.split("/").filter((function(e){return!!e}));6===n.length?(e=n[5],t=1):5===n.length?(e=n[3],t=3):2===n.length&&["u","user"].includes(n[0])?q(n[1]):me(L)}catch(c){L.includes("/")?pe||me(L):(clearTimeout(a),a=setTimeout((function(){return Object(j.d)(L).then((function(e){e?q(L):pe||me(L)}))}),250))}[1,3].includes(t)&&B("t".concat(t,"_").concat(e))}}),[L]);var me=function(e){alert("".concat(e," could not be identified as a Reddit post, comment, or user.")),P("")};function be(){return he.apply(this,arguments)}function he(){return(he=s()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checking approval"),e.next=3,w.allowance(n,k.b[i].tipping);case 3:t=e.sent,console.log("allowance",t),ae(t.gte(Object(g.b)(Z.replace(/,/g,""))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){function e(){return(e=s()(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://www.reddit.com/api/info.json?id=".concat(A));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,q(c.author),"t3"===a?se(c.title):"t1"===a&&se(c.body);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A?function(){e.apply(this,arguments)}():se("")}),[A]),Object(l.useEffect)((function(){if(!_)return G(""),void V("");function e(){return(e=s()(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://old.reddit.com/user/".concat(_,"/about.json"));case 2:if(t=e.sent,!t.error){e.next=8;break}return P(""),q(""),e.abrupt("return");case 8:return e.next=10,Object(j.c)({username:_});case 10:return(n=e.sent)&&!W&&G(n.address),e.next=14,y.getPublicAddress({verifier:"reddit",verifierId:_});case 14:a=e.sent,V(a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}de(!A),function(){e.apply(this,arguments)}()}),[_]),Object(l.useEffect)((function(){w?be():ae(!1)}),[w,Z]);var ve,ge,we=Object(l.useState)(!0),Ee=u()(we,2);Ee[0],Ee[1];W?(ve=W,ge=p.a.createElement("span",{className:"address-logo donut",style:{marginLeft:".25em"},title:"Using donut registered address for ".concat(_," (").concat(ve,")")},"üç©")):Q?(ve=Q,ge=p.a.createElement("img",{className:"address-logo torus",src:"/torus_logo.png",alt:"Torus Logo",title:"Using Tor.us address for ".concat(_," (").concat(ve,")")})):_&&(ge=p.a.createElement("span",{className:"address-logo wait"}));var Oe,je,ke,xe=N||!Z||!ve,Ne=h()("complete cute-pink-btn",{disabled:xe});return Oe=c?100===i?ne?p.a.createElement("div",{className:Ne,onClick:function(){return function(e,t,n,a,c,r,i){return S.apply(this,arguments)}(v,i,"DONUT",ve,Z,A,C)}},"Send Tip"):p.a.createElement("div",{className:Ne,onClick:function(){return function(e,t,n){return T.apply(this,arguments)}(w.connect(v),k.b[i].tipping,C).then(be)}},"Approve"):p.a.createElement("div",{className:Ne,onClick:function(){return Object(j.g)(o,C)}},"Use xDai"):p.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),_&&(je=p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{style:{textDecoration:"none"},target:"blank",href:"https://www.reddit.com/u/".concat(_)},"/u/",_),p.a.createElement(d.a,{className:"cancel",icon:f.a,onClick:fe}))),ke=pe?p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("span",{className:"user-prefix",onClick:function(){return oe.current.focus()}},"/u/"),p.a.createElement("input",{ref:oe,value:_,onChange:function(e){var t=e.target.value;clearTimeout(a),a=setTimeout((function(){return Object(j.d)(t).then((function(e){return e&&q(t)}))}),250)},placeholder:"vitalik"}),ge):p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("input",{ref:oe,value:L,onChange:function(e){return P(e.target.value)},onKeyPress:j.e,placeholder:"Paste a reddit post here"})),p.a.createElement("div",{className:"tipping-interface box"},p.a.createElement("div",{className:"tip-token"},"üç©"),p.a.createElement("div",{className:"cute-header tip-info"},je?p.a.createElement("span",null,"Tipping ",je):"Choose a ".concat(pe?"User":"Post"," to Tip")),p.a.createElement("div",{className:"tip-token-info"},je?"EthTrader DONUTs":p.a.createElement("span",null,"Or ",p.a.createElement("a",{onClick:function(){return fe()||de(!pe)}},"click here")," to tip a ",pe?"post":"user")),pe||!ie&&!_?ke:p.a.createElement("div",{className:"reddit-preview"},p.a.createElement("h3",{className:"author"},_," ",ge),ie&&p.a.createElement("p",{className:"body"},ie)),p.a.createElement("div",{className:"cute-input quantity-container"},p.a.createElement("input",{value:Z,onChange:function(e){return function(e){$(Object(j.a)(e.replace(/,/g,"")))}(e.target.value)}}),p.a.createElement("div",{className:"token"},"DONUT")),Oe)}}}]);