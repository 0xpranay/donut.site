(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{139:function(t,e,n){"use strict";n.r(e);var r,i=n(299),a=n.n(i),s=n(4),c=n.n(s),u=(n(268),n(541)),o=n.n(u),f=n(300),l=n(542),h=n.n(l);o.a.extend(h.a);var d=f.a.div(r||(r=a()(["\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  font-size: 10vh;\n"])));e.default=function(){var t,e=(t="","undefined"!=typeof window&&(t=window.location.search),new URLSearchParams(t)).get("utc");return c.a.createElement(d,null,o()(e).format("h:ma"))}},268:function(t,e,n){"use strict";var r,i=n(1),a=n.n(i),s=n(32),c=n.n(s),u=n(24),o=n.n(u),f=n(4),l=n.n(f),h=n(77),d=n(78),p=n(48),m=n(131),v=n.n(m),$=n(67),g=n(80),b=n(583),w=n(65),O=n(56),y=n(76),D=n(49),S=n(387),M=(n(231),new S.a);function T(){return(T=c()(a.a.mark((function t(e,n,r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,e.approve(n,w.a);case 4:return i=t.sent,t.next=7,i.wait();case 7:t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(1),t.t0;case 12:r(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function j(){return(j=c()(a.a.mark((function t(e,n,r,i,s,c,u){var o,f,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=s.replace(/,/g,""),console.log(r,i,s,c),u(!0),o=D.b[n][r.toLowerCase()],f=new $.a(D.b[n].tipping,D.a.Tipping,e),t.prev=5,t.next=8,f.tip(i,Object(g.b)(s),o,Object(b.a)(c));case 8:return l=t.sent,t.next=11,l.wait();case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(5),t.t0;case 16:u(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}e.a=function(t){var e=Object(p.b)(),n=e.account,i=e.active,s=e.chainId,u=e.library,m=Object(O.b)(),$=m.signer,b=(m.feeBalance,m.donutBalance,m.token),w=(m.tipping,Object(f.useState)(!1)),S=o()(w,2),x=S[0],E=S[1],k=Object(f.useState)(""),C=o()(k,2),N=C[0],U=C[1],Y=Object(f.useState)(t.contentId),_=o()(Y,2),H=_[0],L=_[1],I=Object(f.useState)(t.recipient||""),W=o()(I,2),A=W[0],F=W[1],z=Object(f.useState)(t.address),J=o()(z,2),P=J[0],Z=J[1],R=Object(f.useState)(),B=o()(R,2),V=B[0],q=B[1],K=Object(f.useState)("1"),Q=o()(K,2),G=Q[0],X=Q[1],tt=Object(f.useState)(!1),et=o()(tt,2),nt=et[0],rt=et[1],it=Object(f.useState)(""),at=o()(it,2),st=at[0],ct=at[1],ut=Object(f.useRef)(null),ot=Object(f.useState)(!0),ft=o()(ot,2),lt=ft[0],ht=ft[1];function dt(){U(""),L(""),ct(""),F(""),ut&&ut.current&&ut.current.focus()}Object(f.useEffect)((function(){A&&U(t.recipient)}),[]),Object(f.useEffect)((function(){if(N){var t="",e=0;try{var n=new URL(N).pathname.split("/").filter((function(t){return!!t}));6===n.length?(t=n[5],e=1):5===n.length?(t=n[3],e=3):2===n.length&&["u","user"].includes(n[0])?F(n[1]):pt(N)}catch(i){N.includes("/")?lt||pt(N):(clearTimeout(r),r=setTimeout((function(){return Object(y.d)(N).then((function(t){t?F(N):lt||pt(N)}))}),250))}[1,3].includes(e)&&L("t".concat(e,"_").concat(t))}}),[N]);var pt=function(t){alert("".concat(t," could not be identified as a Reddit post, comment, or user.")),U("")};function mt(){return vt.apply(this,arguments)}function vt(){return(vt=c()(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("checking approval"),t.next=3,b.allowance(n,D.b[s].tipping);case 3:e=t.sent,console.log("allowance",e),rt(e.gte(Object(g.b)(G.replace(/,/g,""))));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(f.useEffect)((function(){function t(){return(t=c()(a.a.mark((function t(){var e,n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.b)("https://www.reddit.com/api/info.json?id=".concat(H));case 2:e=t.sent,n=e.data.children[0],r=n.kind,i=n.data,F(i.author),"t3"===r?ct(i.title):"t1"===r&&ct(i.body);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}H?function(){t.apply(this,arguments)}():ct("")}),[H]),Object(f.useEffect)((function(){if(!A)return Z(""),void q("");function t(){return(t=c()(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.b)("https://old.reddit.com/user/".concat(A,"/about.json"));case 2:if(e=t.sent,!e.error){t.next=8;break}return U(""),F(""),t.abrupt("return");case 8:return t.next=10,Object(y.c)({username:A});case 10:return(n=t.sent)&&!P&&Z(n.address),t.next=14,M.getPublicAddress({verifier:"reddit",verifierId:A});case 14:r=t.sent,q(r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}ht(!H),function(){t.apply(this,arguments)}()}),[A]),Object(f.useEffect)((function(){b?mt():rt(!1)}),[b,G]);var $t,gt,bt=Object(f.useState)(!0),wt=o()(bt,2);wt[0],wt[1];P?($t=P,gt=l.a.createElement("span",{className:"address-logo donut",style:{marginLeft:".25em"},title:"Using donut registered address for ".concat(A," (").concat($t,")")},"🍩")):V?($t=V,gt=l.a.createElement("img",{className:"address-logo torus",src:"/torus_logo.png",alt:"Torus Logo",title:"Using Tor.us address for ".concat(A," (").concat($t,")")})):A&&(gt=l.a.createElement("span",{className:"address-logo wait"}));var Ot,yt,Dt,St=x||!G||!$t,Mt=v()("complete cute-pink-btn",{disabled:St});return Ot=i?100===s?nt?l.a.createElement("div",{className:Mt,onClick:function(){return function(t,e,n,r,i,a,s){return j.apply(this,arguments)}($,s,"DONUT",$t,G,H,E)}},"Send Tip"):l.a.createElement("div",{className:Mt,onClick:function(){return function(t,e,n){return T.apply(this,arguments)}(b.connect($),D.b[s].tipping,E).then(mt)}},"Approve"):l.a.createElement("div",{className:Mt,onClick:function(){return Object(y.g)(u,E)}},"Use xDai"):l.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),A&&(yt=l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{style:{textDecoration:"none"},target:"blank",href:"https://www.reddit.com/u/".concat(A)},"/u/",A),l.a.createElement(h.a,{className:"cancel",icon:d.a,onClick:dt}))),Dt=lt?l.a.createElement("div",{className:"cute-input target-container"},l.a.createElement("span",{className:"user-prefix",onClick:function(){return ut.current.focus()}},"/u/"),l.a.createElement("input",{ref:ut,value:A,onChange:function(t){var e=t.target.value;clearTimeout(r),r=setTimeout((function(){return Object(y.d)(e).then((function(t){return t&&F(e)}))}),250)},placeholder:"vitalik"}),gt):l.a.createElement("div",{className:"cute-input target-container"},l.a.createElement("input",{ref:ut,value:N,onChange:function(t){return U(t.target.value)},onKeyPress:y.e,placeholder:"Paste a reddit post here"})),l.a.createElement("div",{className:"tipping-interface box"},l.a.createElement("div",{className:"tip-token"},"🍩"),l.a.createElement("div",{className:"cute-header tip-info"},yt?l.a.createElement("span",null,"Tipping ",yt):"Choose a ".concat(lt?"User":"Post"," to Tip")),l.a.createElement("div",{className:"tip-token-info"},yt?"EthTrader DONUTs":l.a.createElement("span",null,"Or ",l.a.createElement("a",{onClick:function(){return dt()||ht(!lt)}},"click here")," to tip a ",lt?"post":"user")),lt||!st&&!A?Dt:l.a.createElement("div",{className:"reddit-preview"},l.a.createElement("h3",{className:"author"},A," ",gt),st&&l.a.createElement("p",{className:"body"},st)),l.a.createElement("div",{className:"cute-input quantity-container"},l.a.createElement("input",{value:G,onChange:function(t){return function(t){X(Object(y.a)(t.replace(/,/g,"")))}(t.target.value)}}),l.a.createElement("div",{className:"token"},"DONUT")),Ot)}},309:function(t,e){},310:function(t,e){},315:function(t,e){},333:function(t,e){},541:function(t,e,n){var r,i,a=n(13);!function(s,c){"object"==a(e)&&void 0!==t?t.exports=c():void 0===(i="function"==typeof(r=c)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",s="hour",c="day",u="week",o="month",f="quarter",l="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+$(r,2,"0")+":"+$(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,o),a=n-i<0,s=e.clone().add(r+(a?-1:1),o);return+(-(r+(n-i)/(a?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:o,y:l,w:u,d:c,D:h,h:s,m:i,s:r,ms:n,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",w={};w[b]=v;var O=function(t){return t instanceof M},y=function(t,e,n){var r;if(!t)return b;if("string"==typeof t)w[t]&&(r=t),e&&(w[t]=e,r=t);else{var i=t.name;w[i]=t,r=i}return!n&&r&&(b=r),r||!n&&b},D=function(t,e){if(O(t))return t.clone();var n="object"==a(e)?e:{};return n.date=t,n.args=arguments,new M(n)},S=g;S.l=y,S.i=O,S.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function a(t){this.$L=y(t.locale,null,!0),this.parse(t)}var v=a.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(t,e){var n=D(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return D(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<D(t)},v.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,a=!!S.u(e)||e,f=S.p(t),d=function(t,e){var r=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return a?r:r.endOf(c)},p=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},m=this.$W,v=this.$M,$=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return a?d(1,0):d(31,11);case o:return a?d(1,v):d(0,v+1);case u:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return d(a?$-w:$+(6-w),v);case c:case h:return p(g+"Hours",0);case s:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case r:return p(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var a,u=S.p(t),f="set"+(this.$u?"UTC":""),d=(a={},a[c]=f+"Date",a[h]=f+"Date",a[o]=f+"Month",a[l]=f+"FullYear",a[s]=f+"Hours",a[i]=f+"Minutes",a[r]=f+"Seconds",a[n]=f+"Milliseconds",a)[u],p=u===c?this.$D+(e-this.$W):e;if(u===o||u===l){var m=this.clone().set(h,1);m.$d[d](p),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[S.p(t)]()},v.add=function(n,a){var f,h=this;n=Number(n);var d=S.p(a),p=function(t){var e=D(h);return S.w(e.date(e.date()+Math.round(t*n)),h)};if(d===o)return this.set(o,this.$M+n);if(d===l)return this.set(l,this.$y+n);if(d===c)return p(1);if(d===u)return p(7);var m=(f={},f[i]=t,f[s]=e,f[r]=1e3,f)[d]||1,v=this.$d.getTime()+n*m;return S.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),a=this.$H,s=this.$m,c=this.$M,u=n.weekdays,o=n.months,f=function(t,n,i,a){return t&&(t[n]||t(e,r))||i[n].substr(0,a)},l=function(t){return S.s(a%12||12,t,"0")},h=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:S.s(c+1,2,"0"),MMM:f(n.monthsShort,c,o,3),MMMM:f(o,c),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,u,2),ddd:f(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:S.s(a,2,"0"),h:l(1),hh:l(2),a:h(a,s,!0),A:h(a,s,!1),m:String(s),mm:S.s(s,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(m,(function(t,e){return e||p[t]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,a,h){var d,p=S.p(a),m=D(n),v=(m.utcOffset()-this.utcOffset())*t,$=this-m,g=S.m(this,m);return g=(d={},d[l]=g/12,d[o]=g,d[f]=g/3,d[u]=($-v)/6048e5,d[c]=($-v)/864e5,d[s]=$/e,d[i]=$/t,d[r]=$/1e3,d)[p]||$,h?g:S.a(g)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return w[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=y(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},a}(),T=M.prototype;return D.prototype=T,[["$ms",n],["$s",r],["$m",i],["$H",s],["$W",c],["$M",o],["$y",l],["$D",h]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),D.extend=function(t,e){return t.$i||(t(e,M,D),t.$i=!0),D},D.locale=y,D.isDayjs=O,D.unix=function(t){return D(1e3*t)},D.en=w[b],D.Ls=w,D.p={},D}))},542:function(t,e,n){var r,i,a=n(13);!function(s,c){"object"==a(e)&&void 0!==t?t.exports=c():void 0===(i="function"==typeof(r=c)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,a){var s=i.prototype;a.utc=function(t){var e={date:t,utc:!0,args:arguments};return new i(e)},s.utc=function(e){var n=a(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},s.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),c.call(this,t)};var u=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var o=s.utcOffset;s.utcOffset=function(r,i){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?o.call(this):this.$offset;if("string"==typeof r&&null===(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],a=i[0],s=60*+i[1]+ +i[2];return 0===s?0:"+"===a?s:-s}(r)))return this;var s=Math.abs(r)<=16?60*r:r,c=this;if(i)return c.$offset=s,c.$u=0===r,c;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(c=this.local().add(s+u,t)).$offset=s,c.$x.$localOffset=u}else c=this.utc();return c};var f=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var l=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var h=s.diff;s.diff=function(t,e,n){if(t&&this.$u===t.$u)return h.call(this,t,e,n);var r=this.local(),i=a(t).local();return h.call(r,i,e,n)}}}))}}]);