(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{124:function(e,t,n){"use strict";n.r(t);var a,c=n(223),r=n.n(c),i=n(4),s=n.n(i),o=(n(222),n(239)),u=n.n(o),l=n(224),p=n(240),d=n.n(p);u.a.extend(d.a);var f=l.a.div(a||(a=r()(["\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  font-size: 10vh;\n"])));t.default=function(){var e,t=(e="","undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e)).get("utc");return s.a.createElement(f,null,u()(t).format("h:ma"))}},222:function(e,t,n){"use strict";var a,c=n(2),r=n.n(c),i=n(29),s=n.n(i),o=n(21),u=n.n(o),l=n(4),p=n.n(l),d=n(68),f=n(70),m=n(43),h=n(116),b=n.n(h),v=n(62),g=n(71),w=n(242),E=n(58),x=n(52),j=n(69),O=n(44),k=n(225),y=n.n(k),N=(n(216),new y.a);function T(){return(T=s()(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,t.approve(n,E.a);case 4:return c=e.sent,e.next=7,c.wait();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function C(){return(C=s()(r.a.mark((function e(t,n,a,c,i,s,o){var u,l,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=i.replace(/,/g,""),console.log(a,c,i,s),o(!0),u=O.b[n][a],l=new v.a(O.b[n].tipping,O.a.Tipping,t),e.prev=5,e.next=8,l.tip(c,Object(g.b)(i),u,Object(w.a)(s));case 8:return p=e.sent,e.next=11,p.wait();case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),e.t0;case 16:o(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function S(){return(S=s()(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,t.jsonRpcFetchFunc("wallet_addEthereumChain",[{chainId:"0x64",chainName:"xDai",nativeCurrency:{name:"xDai",symbol:"xDai",decimals:18},rpcUrls:["https://rpc.xdaichain.com/"],blockExplorerUrls:["https://blockscout.com/xdai/mainnet"]}]);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:n(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}t.a=function(e){var t=Object(m.b)(),n=t.account,c=t.active,i=t.chainId,o=t.library,h=Object(x.b)(),v=h.signer,w=(h.feeBalance,h.donutBalance,h.token),E=(h.tipping,Object(l.useState)(!1)),k=u()(E,2),y=k[0],U=k[1],D=Object(l.useState)(""),P=u()(D,2),R=P[0],F=P[1],I=Object(l.useState)(e.contentId),L=u()(I,2),_=L[0],A=L[1],B=Object(l.useState)(e.recipient||""),J=u()(B,2),q=J[0],z=J[1],K=Object(l.useState)(e.address),W=u()(K,2),G=W[0],H=W[1],M=Object(l.useState)(),Q=u()(M,2),V=Q[0],X=Q[1],Y=Object(l.useState)("1,000"),Z=u()(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)(!1),ne=u()(te,2),ae=ne[0],ce=ne[1],re=Object(l.useState)(""),ie=u()(re,2),se=ie[0],oe=ie[1],ue=Object(l.useRef)(null),le=Object(l.useState)(!0),pe=u()(le,2),de=pe[0],fe=pe[1];function me(){F(""),A(""),oe(""),z(""),ue&&ue.current&&ue.current.focus()}Object(l.useEffect)((function(){q&&F(e.recipient)}),[]),Object(l.useEffect)((function(){if(R){var e="",t=0;try{var n=new URL(R).pathname.split("/").filter((function(e){return!!e}));6===n.length?(e=n[5],t=1):5===n.length?(e=n[3],t=3):2===n.length&&["u","user"].includes(n[0])?z(n[1]):he(R)}catch(c){R.includes("/")?de||he(R):(clearTimeout(a),a=setTimeout((function(){return Object(j.d)(R).then((function(e){e?z(R):de||he(R)}))}),250))}[1,3].includes(t)&&A("t".concat(t,"_").concat(e))}}),[R]);var he=function(e){alert("".concat(e," could not be identified as a Reddit post, comment, or user.")),F("")};function be(){return ve.apply(this,arguments)}function ve(){return(ve=s()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checking approval"),e.next=3,w.allowance(n,O.b[i].tipping);case 3:t=e.sent,console.log("allowance",t),ce(t.gte(Object(g.b)($.replace(/,/g,""))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){function e(){return(e=s()(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://www.reddit.com/api/info.json?id=".concat(_));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,z(c.author),"t3"===a?oe(c.title):"t1"===a&&oe(c.body);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_?function(){e.apply(this,arguments)}():oe("")}),[_]),Object(l.useEffect)((function(){if(!q)return H(""),void X("");function e(){return(e=s()(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://old.reddit.com/user/".concat(q,"/about.json"));case 2:if(t=e.sent,!t.error){e.next=8;break}return F(""),z(""),e.abrupt("return");case 8:return e.next=10,Object(j.c)({username:q});case 10:return(n=e.sent)&&!G&&H(n.address),e.next=14,N.getPublicAddress({verifier:"reddit",verifierId:q});case 14:a=e.sent,X(a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}fe(!_),function(){e.apply(this,arguments)}()}),[q]),Object(l.useEffect)((function(){w?be():ce(!1)}),[w,$]);var ge,we,Ee=Object(l.useState)(!0),xe=u()(Ee,2);xe[0],xe[1];G?(ge=G,we=p.a.createElement("span",{className:"address-logo donut",style:{marginLeft:".25em"},title:"Using donut registered address for ".concat(q," (").concat(ge,")")},"üç©")):V?(ge=V,we=p.a.createElement("img",{className:"address-logo torus",src:"/torus_logo.png",alt:"Torus Logo",title:"Using Tor.us address for ".concat(q," (").concat(ge,")")})):q&&(we=p.a.createElement("span",{className:"address-logo wait"}));var je,Oe,ke,ye=y||!$||!ge,Ne=b()("complete cute-pink-btn",{disabled:ye});return je=c?100===i?ae?p.a.createElement("div",{className:Ne,onClick:function(){return function(e,t,n,a,c,r,i){return C.apply(this,arguments)}(v,i,"DONUT",ge,$,_,U)}},"Send Tip"):p.a.createElement("div",{className:Ne,onClick:function(){return function(e,t,n){return T.apply(this,arguments)}(w.connect(v),O.b[i].tipping,U).then(be)}},"Approve"):p.a.createElement("div",{className:Ne,onClick:function(){return function(e,t){return S.apply(this,arguments)}(o,U)}},"Use xDai"):p.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),q&&(Oe=p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{style:{textDecoration:"none"},target:"blank",href:"https://www.reddit.com/u/".concat(q)},"/u/",q),p.a.createElement(d.a,{className:"cancel",icon:f.a,onClick:me}))),ke=de?p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("span",{className:"user-prefix",onClick:function(){return ue.current.focus()}},"/u/"),p.a.createElement("input",{ref:ue,value:q,onChange:function(e){var t=e.target.value;clearTimeout(a),a=setTimeout((function(){return Object(j.d)(t).then((function(e){return e&&z(t)}))}),250)},placeholder:"vitalik"}),we):p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("input",{ref:ue,value:R,onChange:function(e){return F(e.target.value)},onKeyPress:j.e,placeholder:"Paste a reddit post here"})),p.a.createElement("div",{className:"tipping-interface box"},p.a.createElement("div",{className:"tip-token"},"üç©"),p.a.createElement("div",{className:"cute-header tip-info"},Oe?p.a.createElement("span",null,"Tipping ",Oe):"Choose a ".concat(de?"User":"Post"," to Tip")),p.a.createElement("div",{className:"tip-token-info"},Oe?"EthTrader DONUTs":p.a.createElement("span",null,"Or ",p.a.createElement("a",{onClick:function(){return me()||fe(!de)}},"click here")," to tip a ",de?"post":"user")),de||!se&&!q?ke:p.a.createElement("div",{className:"reddit-preview"},p.a.createElement("h3",{className:"author"},q," ",we),se&&p.a.createElement("p",{className:"body"},se)),p.a.createElement("div",{className:"cute-input quantity-container"},p.a.createElement("input",{value:$,onChange:function(e){return function(e){ee(Object(j.a)(e.replace(/,/g,"")))}(e.target.value)}}),p.a.createElement("div",{className:"token"},"DONUT")),je)}}}]);