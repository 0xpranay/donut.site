(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{113:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),r=n(3),i=n.n(r),s=n(32),u=n.n(s),o=n(21),l=n.n(o),p=n(43),d=n(109),m=n.n(d),f=n(62),b=n(93),v=n(218),h=n(0),w=n(33);function x(e){var t=Object(w.c)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Object(h.h)(Object(h.b)([t,v.a]).slice(0,32))}var E=n(58),k=n(55),y=n(89),O=n(45),g=(n(214),function(e){var t=Object(p.b)(),n=t.account,r=t.active,s=t.chainId,o=t.library,d=Object(k.b)(),f=d.signer,v=(d.feeBalance,d.donutBalance,d.token),h=(d.tipping,Object(a.useState)(!1)),w=l()(h,2),x=w[0],E=w[1],g=Object(a.useState)(e.contentId),C=l()(g,2),U=C[0],D=(C[1],Object(a.useState)(e.recipient)),T=l()(D,2),I=T[0],F=(T[1],Object(a.useState)(e.address)),R=l()(F,2),B=R[0],J=(R[1],Object(a.useState)("1,000")),q=l()(J,2),A=q[0],L=q[1],P=Object(a.useState)(!1),W=l()(P,2),_=W[0],z=W[1],G=Object(a.useState)(""),H=l()(G,2),K=H[0],M=H[1];function Q(){return V.apply(this,arguments)}function V(){return(V=u()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.allowance(n,O.b[s].tipping);case 2:t=e.sent,z(t.gte(Object(b.b)(A.toString())));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=u()(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)("https://www.reddit.com/api/info.json?id=".concat(U));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,"t3"===a?M(c.title):"t1"===a&&M(c.body);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}U?function(){e.apply(this,arguments)}():M("")}),[U]),Object(a.useEffect)((function(){v?Q():z(!1)}),[v,A]);var X,Y=x||!A,Z=m()("complete cute-pink-btn",{disabled:Y}),$=Object(a.useState)(!0),ee=l()($,2),te=ee[0],ne=ee[1];return X=r?100===s?_?c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n,a,c,r,i){return N.apply(this,arguments)}(f,s,"DONUT",B,A,U,E)}},"Send Tip"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t,n){return j.apply(this,arguments)}(v.connect(f),O.b[s].tipping,E).then(Q)}},"Approve"):c.a.createElement("div",{className:Z,onClick:function(){return function(e,t){return S.apply(this,arguments)}(o,E)}},"Use xDai"):c.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),c.a.createElement("div",{className:"tipping-interface box"},c.a.createElement("div",{className:"tip-token"},"üç©"),c.a.createElement("div",{className:"cute-header tip-info"},"Tipping /u/",I),c.a.createElement("div",{className:"tip-token-info"},"EthTrader DONUTs"),c.a.createElement("div",{className:"reddit-preview"},c.a.createElement("h3",{className:"author"},I),c.a.createElement("p",{className:"body"},K)),c.a.createElement("div",{className:"cute-input quantity-container"},c.a.createElement("input",{value:A,onChange:function(e){return function(e){L(Object(y.a)(e.replace(/,/g,"")))}(e.target.value)}}),c.a.createElement("div",{className:"token"},"DONUT")),c.a.createElement("div",{className:"relay-container"},c.a.createElement("div",{className:"relay-text"},"Use Relay"),c.a.createElement("div",{className:m()("toggle",te?"on":"off"),onClick:function(){return ne(!te)}},c.a.createElement("div",{className:"circle"}))),X)});function j(){return(j=u()(i.a.mark((function e(t,n,a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,t.approve(n,E.a);case 4:return c=e.sent,e.next=7,c.wait();case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:a(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(){return(N=u()(i.a.mark((function e(t,n,a,c,r,s,u){var o,l,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),o=O.b[n][a],l=new f.a(O.b[n].tipping,O.a.Tipping,t),e.prev=3,e.next=6,l.tip(c,Object(b.b)(r.toString()),o,x(s));case 6:return p=e.sent,e.next=9,p.wait();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:u(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function S(){return(S=u()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,t.jsonRpcFetchFunc("wallet_addEthereumChain",[{chainId:"0x64",chainName:"xDai",nativeCurrency:{name:"xDai",symbol:"xDai",decimals:18},rpcUrls:["https://rpc.xdaichain.com/"],blockExplorerUrls:["https://blockscout.com/xdai/mainnet"]}]);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:n(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}t.default=function(){var e,t=(e="","undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e));return c.a.createElement(g,{recipient:t.get("recipient"),address:t.get("address"),contentId:t.get("contentId")})}}}]);